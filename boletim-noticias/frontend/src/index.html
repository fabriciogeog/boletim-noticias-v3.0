<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sistema de Gera√ß√£o de Boletim de Not√≠cias - Acess√≠vel">
    <title>Boletim de Not√≠cias - Sistema de Gera√ß√£o</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="dashboard-layout">

    <a href="#main-content" class="skip-link">Pular para conte√∫do principal</a>
    <a href="#navigation" class="skip-link">Pular para navega√ß√£o</a>

    <div class="dashboard-container">

        <nav id="navigation" role="navigation" aria-label="Menu principal">
            <div class="sidebar-header">
                <h2>Boletim.IA</h2>
                <p>Painel de Gera√ß√£o</p>
            </div>
            <ul>
                <li><a href="#gerar" aria-current="page">Gerar Boletim</a></li>
                <li><a href="#historico">Hist√≥rico</a></li>
                <li><a href="#configuracoes">Configura√ß√µes</a></li>
                <li><a href="#ajuda">Ajuda</a></li>
            </ul>
            <div class="sidebar-footer">
                <p>&copy; 2025</p>
            </div>
        </nav>

        <div class="main-content-wrapper">
            
            <header role="banner">
                <h1>Sistema de Boletim de Not√≠cias</h1>
                <p class="subtitle">Gera√ß√£o autom√°tica de boletins com IA</p>
            </header>

            <main id="main-content" role="main">

                <div id="status-bar" role="status" aria-live="polite" aria-atomic="true" class="status-bar">
                    <span id="status-message">Sistema pronto</span>
                </div>

                <section id="gerar" class="content-section active" aria-labelledby="gerar-title">
                    <h2 id="gerar-title">Gerar Novo Boletim</h2>
                    
                    <form id="boletim-form" aria-describedby="form-description">
                        <p id="form-description">
                            Configure as op√ß√µes do seu boletim de not√≠cias. Use Tab para navegar entre os campos.
                        </p>

                        <fieldset>
                            <legend>Categorias de Not√≠cias</legend>
                            <div class="checkbox-group" role="group" aria-labelledby="categorias-legend">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-politica" name="categories" value="politica" checked>
                                    <label for="cat-politica">Pol√≠tica Nacional</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-futebol" name="categories" value="futebol">
                                    <label for="cat-futebol">Futebol</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-esportes" name="categories" value="esportes">
                                    <label for="cat-esportes">Esportes (Outros)</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-cultura" name="categories" value="cultura">
                                    <label for="cat-cultura">Cultura/Entretenimento</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-economia" name="categories" value="economia">
                                    <label for="cat-economia">Economia</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cat-geral" name="categories" value="geral">
                                    <label for="cat-geral">Geral</label>
                                </div>
                            </div>
                        </fieldset>

                        <div class="form-group">
                            <label for="num-articles">
                                N√∫mero de Not√≠cias
                                <span class="help-text" id="num-articles-help">(Recomendado: 5-10)</span>
                            </label>
                            <input 
                                type="number" 
                                id="num-articles" 
                                name="num_articles" 
                                value="8" 
                                min="3" 
                                max="20"
                                aria-describedby="num-articles-help"
                                required
                            >
                        </div>

                        <fieldset>
                            <legend>Estilo de Apresenta√ß√£o</legend>
                            <div class="radio-group" role="radiogroup" aria-labelledby="estilo-legend">
                                <div class="radio-item">
                                    <input type="radio" id="style-jornalistico" name="style" value="jornalistico" checked>
                                    <label for="style-jornalistico">
                                        Jornal√≠stico (Formal e Profissional)
                                    </label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="style-conversacional" name="style" value="conversacional">
                                    <label for="style-conversacional">
                                        Conversacional (Amig√°vel e Natural)
                                    </label>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>Op√ß√µes Adicionais</legend>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="include-intro" name="include_intro" checked>
                                    <label for="include-intro">Incluir Introdu√ß√£o</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="include-outro" name="include_outro" checked>
                                    <label for="include-outro">Incluir Encerramento</label>
                                </div>
                            </div>
                        </fieldset>

                        <div class="button-group">
                            <button 
                                type="submit" 
                                id="btn-gerar" 
                                class="btn btn-primary"
                                aria-label="Gerar boletim com as configura√ß√µes selecionadas"
                            >
                                Gerar Boletim (Ctrl+Enter)
                            </button>
                            <button 
                                type="button" 
                                id="btn-limpar" 
                                class="btn btn-secondary"
                                aria-label="Limpar formul√°rio"
                            >
                                Limpar
                            </button>
                        </div>
                    </form>

                    <div id="resultado" class="resultado-area" aria-live="polite" aria-atomic="true" hidden>
                        <h3>Boletim Gerado</h3>
                        
                        <div class="texto-boletim">
                            <label for="texto-gerado">Texto do Boletim:</label>
                            <textarea 
                                id="texto-gerado" 
                                rows="15" 
                                aria-label="Texto do boletim gerado. Voc√™ pode editar antes de gerar o √°udio."
                                readonly
                            ></textarea>
                            <div class="button-group" style="margin-top: 1rem;">
                                <button 
                                    type="button" 
                                    id="btn-editar-texto" 
                                    class="btn btn-secondary"
                                    aria-label="Habilitar edi√ß√£o do texto"
                                >
                                    Editar Texto (Ctrl+E)
                                </button>
                                
                                <button 
                                    type="button" 
                                    id="btn-copiar-texto" 
                                    class="btn btn-secondary"
                                    aria-label="Copiar texto para √°rea de transfer√™ncia"
                                >
                                    Copiar Texto
                                </button>
                            </div>
                        </div>

                        <div id="audio-player" class="audio-player" hidden>
                            <h4>√Åudio Gerado</h4>
                            <audio 
                                id="audio-element" 
                                controls 
                                preload="metadata"
                                aria-label="Player de √°udio do boletim gerado"
                            >
                                Seu navegador n√£o suporta o elemento de √°udio.
                            </audio>
                            <div class="audio-actions">
                                <button 
                                    type="button" 
                                    id="btn-download" 
                                    class="btn btn-success"
                                    aria-label="Baixar arquivo de √°udio"
                                >
                                    Baixar √Åudio (Ctrl+D)
                                </button>
                                <button 
                                    type="button" 
                                    id="btn-regenerar-audio" 
                                    class="btn btn-secondary"
                                    aria-label="Regenerar √°udio com texto editado"
                                >
                                    Regenerar √Åudio
                                </button>
                            </div>
                        </div>
                    </div>

                    <div id="loading" class="loading" hidden role="alert" aria-live="assertive">
                        <div class="spinner" aria-hidden="true"></div>
                        <p id="loading-message">Gerando boletim, aguarde...</p>
                    </div>
                </section>

                <section id="historico" class="content-section" aria-labelledby="historico-title" hidden>
                    <h2 id="historico-title">Hist√≥rico de Boletins</h2>
                    <p class="form-description">
                        Consulte, ou√ßa e gerencie todos os boletins gerados anteriormente.
                    </p>
                    
                    <div class="button-group" style="margin-bottom: 1rem;">
                        <button type="button" id="btn-atualizar-historico" class="btn btn-primary">
                            Atualizar Hist√≥rico
                        </button>
                    </div>

                    <div id="historico-container">
                        <div id="historico-loading" class="loading" hidden>
                            <div class="spinner"></div>
                            <p>Carregando hist√≥rico...</p>
                        </div>
                        <table class="history-table" id="history-table">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Categorias</th>
                                    <th>Texto (In√≠cio)</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="historico-tabela-corpo">
                                </tbody>
                        </table>
                    </div>
                    
                    <div id="historico-audio-player" class="audio-player" hidden>
                        <h4>Ouvindo Hist√≥rico</h4>
                        <audio id="historico-audio-element" controls preload="metadata">
                            Seu navegador n√£o suporta o elemento de √°udio.
                        </audio>
                    </div>

                </section>

                <section id="configuracoes" class="content-section" aria-labelledby="config-title" hidden>
                    <h2 id="config-title">Configura√ß√µes</h2>
                    
                    <form id="config-form">
                        <fieldset>
                            <legend>Chave de API (GNews.io)</legend>
                            <p class="form-description">
                                Insira sua chave de API do GNews.io. Necess√°ria para coletar not√≠cias.
                            </p>
                            <div class="form-group">
                                <label for="config-api-key">GNEWS_API_KEY:</label>
                                <input type="password" id="config-api-key" aria-describedby="api-key-help">
                                <span class="help-text" id="api-key-help">
                                    Sua chave √© salva localmente no arquivo <code>.env</code> do servidor.
                                </span>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>Configura√ß√£o de Voz (gTTS)</legend>
                            <p class="form-description">
                                Selecione o sotaque (TLD) para a voz do Google (gTTS).
                            </p>
                            <div class="form-group">
                                <label for="config-tld-select">Sotaque da Voz:</label>
                                <select id="config-tld-select" aria-label="Selecionar sotaque da voz">
                                    <option value="com.br">Portugu√™s (Brasil)</option>
                                    <option value="pt">Portugu√™s (Portugal)</option>
                                    <option value="com">Ingl√™s (EUA / Google.com)</option>
                                </select>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>Sumariza√ß√£o com IA (Ollama)</legend>
                            <p class="form-description">
                                Habilitar o resumo com IA local (Ollama) requer hardware potente (16GB+ RAM)
                                e que o branch <code>feature/ollama-ai</code> esteja em uso.
                            </p>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="config-enable-ollama" disabled>
                                    <label for="config-enable-ollama">Habilitar Ollama (Desabilitado nesta vers√£o)</label>
                                </div>
                            </div>
                        </fieldset>
                        
                        <div class="button-group">
                            <button type="submit" id="btn-save-config" class="btn btn-primary">
                                Salvar Configura√ß√µes
                            </button>
                        </div>
                    </form>
                </section>

                <section id="ajuda" class="content-section" aria-labelledby="ajuda-title" hidden>
                    <h2 id="ajuda-title">Ajuda e Guia R√°pido</h2>
                    
                    <p class="form-description">
                        Este √© o guia de usu√°rio principal da aplica√ß√£o.
                    </p>

                    <div class="config-section">
                        <h3>üéØ Caracter√≠sticas Principais</h3>
                        <ul>
                            <li>‚úÖ <strong>Coleta Autom√°tica de Not√≠cias</strong> via API GNews.io</li>
                            <li>üéôÔ∏è <strong>Gera√ß√£o de √Åudio R√°pida</strong> com Text-to-Speech via gTTS (Voz do Google)</li>
                            <li>‚ôø <strong>100% Acess√≠vel</strong> com navega√ß√£o por teclado e compat√≠vel com leitores de tela</li>
                            <li>‚ö° <strong>Extremamente Leve</strong> - Roda em qualquer m√°quina.</li>
                        </ul>
                    </div>
                    
                    <div class="config-section">
                        <h3>üîë Requisito Obrigat√≥rio: Chave de API</h3>
                        <p>Este sistema <strong>requer</strong> uma chave de API GNews.io v√°lida para coletar not√≠cias.</p>
                        <p>
                            Se voc√™ receber um erro de "Nenhuma not√≠cia encontrada", 
                            por favor, insira ou atualize sua chave de API na aba 
                            <a href="#configuracoes" onclick="navigateToSection('configuracoes')"><strong>Configura√ß√µes</strong></a>.
                        </p>
                    </div>

                    <div class="config-section">
                        <h3>üéÆ Uso B√°sico (Interface Web)</h3>
                        <ol>
                            <li><strong>Configure</strong>: Marque as categorias desejadas (Pol√≠tica, Futebol, etc.).</li>
                            <li><strong>Gere</strong>: Clique em "Gerar Boletim" (<code>Ctrl+Enter</code>).</li>
                            <li><strong>Aguarde</strong>: ~5-10 segundos.</li>
                            <li><strong>Edite</strong>: Se necess√°rio, clique em "Editar Texto" (<code>Ctrl+E</code>).</li>
                            <li><strong>Baixe</strong>: O MP3 gerado (<code>Ctrl+D</code>) para usar no seu programa!</li>
                        </ol>
                    </div>

                    <div class="config-section">
                        <h3>‚å®Ô∏è Atalhos de Teclado</h3>
                        <dl class="shortcuts-list">
                            <dt>Ctrl + Enter</dt>
                            <dd>Gerar boletim</dd>
                            
                            <dt>Ctrl + E</dt>
                            <dd>Editar texto do boletim</dd>
                            
                            <dt>Ctrl + D</dt>
                            <dd>Baixar √°udio gerado</dd>
                            
                            <dt>Alt + 1</dt>
                            <dd>Ir para Gerar Boletim</dd>
                            
                            <dt>Alt + 2</dt>
                            <dd>Ir para Hist√≥rico</dd>
                            
                            <dt>Alt + 3</dt>
                            <dd>Ir para Configura√ß√µes</dd>
                            
                            <dt>Alt + 4</dt>
                            <dd>Ir para Ajuda</dd>
                        </dl>
                    </div>
                </section>

            </main> 

            <footer role="contentinfo">
                <p>Boletim.IA v3.0 | Desenvolvido com Acessibilidade</p>
            </footer>

        </div> 
    </div> 

    <script src="js/app.js"></script>
    <script src="js/accessibility.js"></script>
</body>
</html>
